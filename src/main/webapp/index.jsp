<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<link rel="icon" type="image/x-icon"
	href="<c:url value="/component/images/ReadShare.ico"/>">

<title>享讀</title>

<link rel="stylesheet"
	href="<c:url value="/component/css/message.css"/>">

<link rel="stylesheet" href="<c:url value="/component/css/base.css"/>">
<link rel="stylesheet" href="<c:url value="/component/css/layout.css"/>">
<link rel="stylesheet"
	href="<c:url value="/component/css/headerAndFooter.css"/>">
<link rel="stylesheet" href="<c:url value="/component/css/main.css"/>">

<link rel="stylesheet"
	href="<c:url value="/component/js/slick-1.8.1/slick/slick.css"/>">
<link rel="stylesheet"
	href="<c:url value="/component/js/slick-1.8.1/slick/slick-theme.css"/>">

<link rel="stylesheet"
	href="<c:url value="/component/css/editorCover.css"/>">

<script src="<c:url value="/component/js/jquery-3.3.1.min.js"/>"></script>
<script src="<c:url value="/component/js/bootstrap.min.js"/>"></script>
<script src="<c:url value="/component/js/jquery-ui-effects.min.js"/>"></script>
<script
	src="<c:url value="/component/js/jquery-ui-Interactions.min.js"/>"></script>

<script
	src="<c:url value="/component/js/slick-1.8.1/slick/slick.min.js"/>"></script>

<%--     <script src="<c:url value="/component/js/IndexClickEventMonitor.js"/>"></script> --%>



</head>
<body>

	<div class="wrapper">

		<%--include header.jsp --%>
		<%@ include file="partial/header.jsp"%>

		<%--網頁內容 --%>

		<div class="container">

			<!-- 大倫播牆 -->
			<section class="section1">

			<div class="single-item">

				<!--                     <div> -->
				<!--                         <a href=""> -->
				<%--                             <img src="<c:url value="/component/images/BannerZone1/1.jpg"/>" alt=""> --%>
				<!--                         </a> -->
				<!--                     </div> -->
			</div>

			</section>

			<!-- AD + 官方活動 -->
			<section class="section2">
			<div>
				<div class="fade">
					<!--                         <div> -->
					<!--                             <a href=""> -->

					<%--                                 <img src="<c:url value="/component/images/BannerZone2/1.jpeg"/>" alt=""> --%>
					<!--                             </a> -->
					<!--                         </div> -->

				</div>

			</div>

			<div></div>
			</section>


			<!-- 首頁書籍排列 一次六本 內容資訊要多 -->
			<section class="section3">

			<ul>
				<!-- 重複一個就好 -->
<!-- 				<li id="1"> -->
<!-- 					<div> -->

<!-- 						第一個a 圖片 -->
<!-- 						<a href=""> <img -->
<%-- 							src="<c:url value="/component/images/book/01.jpg"/>" alt=""> --%>
<!-- 						</a> -->

<!-- 						第二個a 書名 -->
<!-- 						<a href=""> -->
<!-- 							<div class="divBookName">我是書名17px可以到第二行不能到三行超過會不見</div> -->
<!-- 						</a> -->

<!-- 						第三個a 作者 點了就用作者搜尋 -->
<!-- 						<a href=""> -->
<!-- 							<div class="divAuthor">我是作者</div> -->
<!-- 						</a> -->
<!-- 						<div> -->
<!-- 							售價:NT <span>200</span> -->
<!-- 						</div> -->

<!-- 						<div class="divBookIntro">我是一大堆的簡介，設定可以寫兩行超過會被消除</div> -->

<!-- 						<div class="divBookBtZone"> -->
<!-- 							<div> -->

<%-- 								<img src="<c:url value="/component/images/like.png"/>" alt=""> --%>

<!-- 							</div> -->

<!-- 							<div> -->
<%-- 								<img src="<c:url value="/component/images/cart_cargo.png"/>" --%>
<!-- 									alt=""> -->
<!-- 							</div> -->
<!-- 						</div> -->
<!-- 					</div> -->

<!-- 				</li> -->


<!-- 				<li id="2"> -->
<!-- 					<div> -->

<!-- 						第一個a 圖片 -->
<!-- 						<a href=""> <img -->
<%-- 							src="<c:url value="/component/images/book/02.jpg"/>" alt=""> --%>
<!-- 						</a> -->

<!-- 						第二個a 書名 -->
<!-- 						<a href=""> -->
<!-- 							<div class="divBookName">我是書名17px可以到第二行不能到三行超過會不見</div> -->
<!-- 						</a> -->

<!-- 						第三個a 作者 點了就用作者搜尋 -->
<!-- 						<a href=""> -->
<!-- 							<div class="divAuthor">我是作者</div> -->
<!-- 						</a> -->
<!-- 						<div> -->
<!-- 							售價:NT <span>200</span> -->
<!-- 						</div> -->

<!-- 						<div class="divBookIntro">我是一大堆的簡介，設定可以寫兩行超過會被消除</div> -->

<!-- 						<div class="divBookBtZone"> -->
<!-- 							<div> -->

<%-- 								<img src="<c:url value="/component/images/like.png"/>" alt=""> --%>

<!-- 							</div> -->

<!-- 							<div> -->
<%-- 								<img src="<c:url value="/component/images/cart_cargo.png"/>" --%>
<!-- 									alt=""> -->
<!-- 							</div> -->
<!-- 						</div> -->
<!-- 					</div> -->

<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->


<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->
<!-- 				<li> -->
<!-- 					<div></div> -->
<!-- 				</li> -->

			</ul>

			</section>

			<!-- container -->
		</div>

		<c:if test="${user.id ne null}">
			<%@ include file="partial/message.jsp"%>
		</c:if>




		<%--include footer.jsp --%>
		<%@ include file="partial/footer.jsp"%>

	</div>

	<script>
//////////ajax 去資料庫撈廣告資料
    var today = new Date();
    var todayForm = today.getFullYear() + "-" + (today.getMonth() + 1) + "-" + today.getDate();
    $.post("loadAfterDocZone.controller", { "date": todayForm, "zone": 1 }, function (beans) {
        beans.forEach(bean => {
//				console.log('zone1='+bean.id);
			$(".single-item").append("<div><a href="+ bean.adurl  +"><img src="+  bean.adimg  +" alt=''></a></div>");
			
        });
        $('.single-item').slick({
            autoplay: true,
            autoplaySpeed: 3500,
            speed: 1000,
        });
    }, "json");

    $.post("loadAfterDocZone.controller", { "date": todayForm, "zone": 2 }, function (beans) {
    	beans.forEach(bean => {
//				console.log('zone2='+bean.id);
			$(".fade").append("<div><a href="+ bean.adurl  +"><img src="+  bean.adimg  +" alt=''></a></div>");
        });
    	$('.fade').slick({
            autoplay: true,
            autoplaySpeed: 5000,
            dots: true,
            infinite: true,
            speed: 500,
            fade: true,
            cssEase: 'linear'
        });
    }, "json");
	
    $.get("loadBookAfterDoc.controller",{},function(beans){
//     	let docFragment = $(Document.createDocumentFragment());
    	beans.forEach(bean => {
    		console.log(bean.bookName);
    		
//     		let docLi = $("<li id='"+ bean.bookId +"'></li>");
    		
    		let docDivOuter = $("<div></div>");;
    		
    		docDivOuter.append("<a href='<c:url value='/book.controller'/>"+"?id="+ bean.bookId + "'><img src='"+ bean.bookImg +"'></a>");
    		docDivOuter.append("<a href='<c:url value='/book.controller'/>"+"?id="+ bean.bookId + "'><div class='divBookName'>"+bean.bookName+"</div></a>");
    		docDivOuter.append("<a href='<c:url value='/bookSearchResult.controller'/>"+"?tag=authorName&keyWord="+ bean.bookAuthor +"'><div class='divAuthor'>"+bean.bookAuthor+"</div></a>");
    		docDivOuter.append("<div>售價:NT<span>"+bean.bookPrice+"</span></div>");
    		docDivOuter.append("<div class='divBookIntro'>"+bean.bookIntro+"</div>");
    		docDivOuter.append("<div class='divBookBtZone'><div><img src='<c:url value="/component/images/like.png"/>'></div><div><img src='<c:url value="/component/images/cart_cargo.png"/>'></div></div>");
    		let docLi = $("<li id='"+ bean.bookId +"'></li>").append(docDivOuter);
//     		docFragment.append(docDivOuter);
    		
    		$(".section3>ul").append(docLi);
    		
    	});
    },"json");
	
	
	
//         $('.single-item').slick({
//             autoplay: true,
//             autoplaySpeed: 3500,
//             speed: 1000,
//         });

//         $('.fade').slick({
//             autoplay: true,
//             autoplaySpeed: 5000,
//             dots: true,
//             infinite: true,
//             speed: 500,
//             fade: true,
//             cssEase: 'linear'
//         });

        $(
            $(".divBookBtZone img[src$='like.png']").css({ "filter": "grayscale(100%)" })
                .click(
                    function () {
                        var tempObj1 = $(this);
                        // alert(tempObj1.attr('style'));
                        if (tempObj1.attr('style').indexOf("grayscale(100%)") != -1) {
                            $(this).css({ "filter": "grayscale(0%)" })
                        } else {
                            $(this).css({ "filter": "grayscale(100%)" })
                        }
                    })
        );
        
        
        
        
        document.addEventListener("DOMContentLoaded", function () {
        	
        	
        	var page = location.pathname;

            document.addEventListener("click", function () {
                // alert(event.x + "," + event.y  + "test");
                //        saveXY(event.x, event.y)
                ajaxSave(event.x, event.y);
            });

            $(document).on("scroll", function (event) {
                scrollH = $(document).scrollTop() ;//chrome
//                 console.log(scrollH);
            });

            // document.addEventListener("scroll", function (event) {
            //     scrollH = document.documentElement.scrollTop;//chrome
            //     console.log(scrollH);
            // });

            function ajaxSave(bsx, bsy) {
                bsy += scrollH;
                //console.log("bsy=" + bsy);
                $.post("indexClickEventMonitor.controller", { "bsx": bsx, "bsy": bsy , "page": page });
                // alert();
            }

        });

        var scrollH = 0;



	</script>

</body>
</html>